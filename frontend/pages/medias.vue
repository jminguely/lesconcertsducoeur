<template>
  <div>
    <Headline>
      <template #headline> Médias </template>
    </Headline>

    <p class="text-xl font-newsCycle">Retrouvez-nous sur nos réseaux sociaux</p>

    <div class="flex my-5">
      <SocialLink class="mr-2 lg:mr-4" name="facebook" link="https://www.facebook.com/concertsducoeur/" />
      <SocialLink name="instagram" link="https://www.instagram.com/lesconcertsducoeur/" />
    </div>

    <spacing />

    <Headline>
      <template #headline>
        <h1 class="text-4xl lg:text-5xl">Newsletters</h1>
      </template>
    </Headline>

    <div class="text-xl font-newsCycle">
      <p>
        <a
          href="https://lesconcertsducoeur.statslive.info/show-campaign-archived/eyJpdiI6ImxIekUzbzJiSTFFVnJPQkRad3dPMDRCUElwOWlCREVDaHRKVEplTnBnTFk9IiwidmFsdWUiOiJ0bHV5WEEyVVwvOGtweE1YbWJyM3pvZTN3UG1sUnlUWkRya3l6ZUgwc2p5WT0iLCJtYWMiOiI4ZWFkZWI5YjE4ODE0YzI3YmUwNjVkNThlMDVkMDRkODRhZDRkY2FjMTA4MWRiNjE2Y2VmOWY2Zjk0MjBkNzI5In0="
          target="_blank"
        >
          Newsletter No 6 – Rapport d’activité 2019 | 03.2020
        </a>
      </p>
      <p>
        <a
          href="https://lesconcertsducoeur.statslive.info/show-campaign-archived/eyJpdiI6IkZGMUtrYVFpVGowTFI2cXFDbHQrNnJkem1uWU5rOFlhMFh3QmtpUkN2K3M9IiwidmFsdWUiOiJmT1JyeTJIdnlwN1J3N2FLQ3BqekpHTDhzSTdPbGkxd1wvNmd5UlFcL1dMdFk9IiwibWFjIjoiMmRjOWE1NzY2OTNiOTFjN2MxZTBjNDdjMDA5OTE4MTY0NWMyYzQ0ZjhmMzdlYzNkNjlhZGVkYTYyZGI1ODgyZCJ9"
          target="_blank"
        >
          Newsletter No 5 | 11.2019
        </a>
      </p>
      <p>
        <a
          href="https://lesconcertsducoeur.statslive.info/show-campaign-archived/eyJpdiI6IlVYRXd1VzFlQksrMkdSa2hDSWhiS2g5MzNVSHVQMmlVRVNvYWNDWG1vSVE9IiwidmFsdWUiOiJueU5hR21aMUx6MFIxSWZCSFVtRUUyNlljTnNsand3WkhoQU9jYzJDZ2lrPSIsIm1hYyI6ImI2NTI1YjMyNDc4OGFiOTc2NWNmZmQxNjIxNDE0ODgxYzM0MzBjM2ExNDQyMzFjYmFiNzk4M2E0NDgxODI0NGYifQ=="
          target="_blank"
        >
          Newsletter No 4 – Rapport d’activité 2018 | 07.2019
        </a>
      </p>
      <p>
        <a
          href="https://lesconcertsducoeur.statslive.info/show-campaign-archived/eyJpdiI6ImxtSWxBdXRpYzRrdkpNdWt4TWlTMDlXaHNMajlhOGhkcm4yNVdWRGdcL09ZPSIsInZhbHVlIjoia3FCd2Q4RDZWbmV2eHY4Rm1aU0haZlUxcnE5ekk1OTA2NERkeStKU0ZxZz0iLCJtYWMiOiJjNjlmYmRmYWVjMjk3OTlkNjdjYWMzNzJjZGI5ZTg5ODhhNzYwM2Y0MmI3YjQ2ZWJhNzkwOTYzYjg2NGUxMGQ2In0="
          target="_blank"
        >
          Newsletter No 3 | 04.2019
        </a>
      </p>
    </div>

    <spacing />

    <Headline>
      <template #headline>
        <span class="text-4xl lg:text-5xl">Presse</span>
      </template>
    </Headline>

    <div class="grid grid-cols-1 sm:grid-cols-2">
      <div class="w-full">
        <div class="mb-10">
          <p class="text-xl underline">La musique adoucit la vie</p>
          <p class="text-xl">Journal de Sierre – 27 janvier 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">La musique adoucit le temps qui passe</p>
          <p class="text-xl">Le Nouvelliste – 14 février 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">Les notes à la rencontre des isolés</p>
          <p class="text-xl">Le Nouvelliste: Supplément Culture – 5 octobre 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">L’univers de la chanteuse lyrique valaisanne Laure Barras</p>
          <p class="text-xl">RTS, La Puce à l’Oreille, 14 décembre 2017</p>
        </div>
      </div>

      <div class="w-full">
        <div class="mb-10">
          <p class="text-xl underline">La musique adoucit la vie</p>
          <p class="text-xl">Journal de Sierre – 27 janvier 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">La musique adoucit le temps qui passe</p>
          <p class="text-xl">Le Nouvelliste – 14 février 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">Les notes à la rencontre des isolés</p>
          <p class="text-xl">Le Nouvelliste: Supplément Culture – 5 octobre 2017</p>
        </div>

        <div class="mb-10">
          <p class="text-xl underline">L’univers de la chanteuse lyrique valaisanne Laure Barras</p>
          <p class="text-xl">RTS, La Puce à l’Oreille, 14 décembre 2017</p>
        </div>
      </div>
    </div>

    <spacing />

    <Headline class="mb-4">
      <template #headline>Images</template>
    </Headline>

    <div class="">
      <template v-if="content != null">
        <template v-if="content.carousel != null">
          <template v-if="content.carousel.images != null">
            <Carousel
              class="mx-auto"
              :options="{
                rewind: true,
                perPage: 1,
                gap: '1rem',
                type: 'fade',
                arrows: true,
                autoplay: true,
                interval: 3000,
              }"
              :images="content.carousel.images"
            />
          </template>
        </template>
      </template>
    </div>
  </div>
</template>

<script>
import Headline from '@/components/typography/Headline.vue'
import SocialLink from '@/components/pages/SocialLink.vue'
import Spacing from '@/components/typography/Spacing.vue'
import Carousel from '@/components/pages/Carousel.vue'
import { gql } from 'graphql-tag'

export default {
  components: {
    Headline,
    Carousel,
    SocialLink,
    Spacing,
  },
  data() {
    return {
      content: null,
    }
  },
  async fetch() {
    await this.getContent()
  },
  methods: {
    async getContent() {
      const query = gql`
        query getHome {
          home {
            id
            carousel {
              id
              images {
                id
                url
              }
            }
          }
        }
      `

      this.content = await this.$apollo
        .query({ query })
        .then(({ data }) => {
          if (process.env.dev) console.log(data)
          return data
        })
        .catch((e) => {
          if (process.env.dev) console.log(e)
        })
      this.content = this.content.home
    },
  },
}
</script>
